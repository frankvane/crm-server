{
    "sourceFile": "seeders/20240321-add-role-permissions.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1746007931401,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1746008109179,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,49 +1,51 @@\n-'use strict';\r\n+\"use strict\";\r\n \r\n-const { Permission, Role } = require('../models');\r\n+const { Permission, Role } = require(\"../models\");\r\n \r\n module.exports = {\r\n   async up(queryInterface, Sequelize) {\r\n     try {\r\n       // 创建 view_roles 权限\r\n       const viewRolesPermission = await Permission.create({\r\n-        name: 'view_roles',\r\n-        action: 'read',\r\n-        resource: 'role',\r\n-        description: '查看角色列表'\r\n+        name: \"view_roles\",\r\n+        action: \"read\",\r\n+        resource: \"role\",\r\n+        description: \"查看角色列表\",\r\n       });\r\n \r\n       // 获取 admin 角色\r\n       const adminRole = await Role.findOne({\r\n-        where: { name: 'admin' }\r\n+        where: { name: \"admin\" },\r\n       });\r\n \r\n       if (adminRole) {\r\n         // 获取当前的权限\r\n         const currentPermissions = await adminRole.getPermissions();\r\n-        \r\n+\r\n         // 添加新权限到现有权限中\r\n         await adminRole.addPermission(viewRolesPermission);\r\n       }\r\n \r\n-      console.log('Successfully added view_roles permission and assigned to admin role');\r\n+      console.log(\r\n+        \"Successfully added view_roles permission and assigned to admin role\"\r\n+      );\r\n     } catch (error) {\r\n-      console.error('Error in seeder:', error);\r\n+      console.error(\"Error in seeder:\", error);\r\n     }\r\n   },\r\n \r\n   async down(queryInterface, Sequelize) {\r\n     try {\r\n       // 删除 view_roles 权限\r\n\\ No newline at end of file\n       await Permission.destroy({\r\n         where: {\r\n-          name: 'view_roles'\r\n-        }\r\n+          name: \"view_roles\",\r\n+        },\r\n       });\r\n \r\n-      console.log('Successfully removed view_roles permission');\r\n+      console.log(\"Successfully removed view_roles permission\");\r\n     } catch (error) {\r\n-      console.error('Error in seeder:', error);\r\n+      console.error(\"Error in seeder:\", error);\r\n     }\r\n-  }\r\n-}; \n+  },\r\n+};\r\n"
                }
            ],
            "date": 1746007931401,
            "name": "Commit-0",
            "content": "'use strict';\r\n\r\nconst { Permission, Role } = require('../models');\r\n\r\nmodule.exports = {\r\n  async up(queryInterface, Sequelize) {\r\n    try {\r\n      // 创建 view_roles 权限\r\n      const viewRolesPermission = await Permission.create({\r\n        name: 'view_roles',\r\n        action: 'read',\r\n        resource: 'role',\r\n        description: '查看角色列表'\r\n      });\r\n\r\n      // 获取 admin 角色\r\n      const adminRole = await Role.findOne({\r\n        where: { name: 'admin' }\r\n      });\r\n\r\n      if (adminRole) {\r\n        // 获取当前的权限\r\n        const currentPermissions = await adminRole.getPermissions();\r\n        \r\n        // 添加新权限到现有权限中\r\n        await adminRole.addPermission(viewRolesPermission);\r\n      }\r\n\r\n      console.log('Successfully added view_roles permission and assigned to admin role');\r\n    } catch (error) {\r\n      console.error('Error in seeder:', error);\r\n    }\r\n  },\r\n\r\n  async down(queryInterface, Sequelize) {\r\n    try {\r\n      // 删除 view_roles 权限\r\n      await Permission.destroy({\r\n        where: {\r\n          name: 'view_roles'\r\n        }\r\n      });\r\n\r\n      console.log('Successfully removed view_roles permission');\r\n    } catch (error) {\r\n      console.error('Error in seeder:', error);\r\n    }\r\n  }\r\n}; "
        }
    ]
}