{
    "sourceFile": "routes/categoryType.routes.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 10,
            "patches": [
                {
                    "date": 1745926083374,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1745926358251,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,42 +1,36 @@\n-const express = require('express');\r\n+const express = require(\"express\");\r\n const router = express.Router();\r\n-const categoryTypeController = require('../controllers/categoryType.controller');\r\n-const { authJwt, rbac } = require('../middlewares');\r\n+const categoryTypeController = require(\"../controllers/categoryType.controller\");\r\n+const { authJwt, rbac } = require(\"../middlewares\");\r\n \r\n // 所有路由都需要JWT认证\r\n router.use(authJwt.verifyToken);\r\n \r\n // 创建分类类型\r\n router.post(\r\n-  '/',\r\n-  [rbac.checkPermission('manage_categories')],\r\n+  \"/\",\r\n+  [rbac.checkPermission(\"manage_categories\")],\r\n   categoryTypeController.create\r\n );\r\n \r\n // 获取分类类型列表\r\n-router.get(\r\n-  '/',\r\n-  categoryTypeController.findAll\r\n-);\r\n+router.get(\"/\", categoryTypeController.findAll);\r\n \r\n // 获取单个分类类型\r\n-router.get(\r\n-  '/:id',\r\n-  categoryTypeController.findOne\r\n-);\r\n+router.get(\"/:id\", categoryTypeController.findOne);\r\n \r\n // 更新分类类型\r\n router.put(\r\n-  '/:id',\r\n-  [rbac.checkPermission('manage_categories')],\r\n+  \"/:id\",\r\n+  [rbac.checkPermission(\"manage_categories\")],\r\n   categoryTypeController.update\r\n );\r\n\\ No newline at end of file\n \r\n // 删除分类类型\r\n router.delete(\r\n-  '/:id',\r\n-  [rbac.checkPermission('manage_categories')],\r\n+  \"/:id\",\r\n+  [rbac.checkPermission(\"manage_categories\")],\r\n   categoryTypeController.delete\r\n );\r\n \r\n-module.exports = router; \n+module.exports = router;\r\n"
                },
                {
                    "date": 1746065676425,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,36 +1,33 @@\n const express = require(\"express\");\r\n const router = express.Router();\r\n const categoryTypeController = require(\"../controllers/categoryType.controller\");\r\n-const { authJwt, rbac } = require(\"../middlewares\");\r\n+const { authJwt } = require(\"../middlewares\");\r\n \r\n-// 所有路由都需要JWT认证\r\n-router.use(authJwt.verifyToken);\r\n-\r\n-// 创建分类类型\r\n+// 创建分类类型（修改为实际存在的权限）\r\n router.post(\r\n   \"/\",\r\n-  [rbac.checkPermission(\"manage_categories\")],\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"category:type:add\")],\r\n   categoryTypeController.create\r\n );\r\n \r\n-// 获取分类类型列表\r\n-router.get(\"/\", categoryTypeController.findAll);\r\n+// 获取分类类型列表（无需特定权限，只需验证令牌）\r\n+router.get(\"/\", [authJwt.verifyToken], categoryTypeController.findAll);\r\n \r\n-// 获取单个分类类型\r\n-router.get(\"/:id\", categoryTypeController.findOne);\r\n+// 获取单个分类类型（无需特定权限，只需验证令牌）\r\n+router.get(\"/:id\", [authJwt.verifyToken], categoryTypeController.findOne);\r\n \r\n-// 更新分类类型\r\n+// 更新分类类型（修改为实际存在的权限）\r\n router.put(\r\n   \"/:id\",\r\n-  [rbac.checkPermission(\"manage_categories\")],\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"category:type:edit\")],\r\n   categoryTypeController.update\r\n );\r\n\\ No newline at end of file\n \r\n-// 删除分类类型\r\n+// 删除分类类型（修改为实际存在的权限）\r\n router.delete(\r\n   \"/:id\",\r\n-  [rbac.checkPermission(\"manage_categories\")],\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"category:type:delete\")],\r\n   categoryTypeController.delete\r\n );\r\n \r\n-module.exports = router;\n+module.exports = router;\r\n"
                },
                {
                    "date": 1746069542675,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,32 +2,40 @@\n const router = express.Router();\r\n const categoryTypeController = require(\"../controllers/categoryType.controller\");\r\n const { authJwt } = require(\"../middlewares\");\r\n \r\n-// 创建分类类型（修改为实际存在的权限）\r\n+// 创建分类类型\r\n router.post(\r\n   \"/\",\r\n   [authJwt.verifyToken, authJwt.hasPermission(\"category:type:add\")],\r\n   categoryTypeController.create\r\n );\r\n \r\n-// 获取分类类型列表（无需特定权限，只需验证令牌）\r\n-router.get(\"/\", [authJwt.verifyToken], categoryTypeController.findAll);\r\n+// 获取分类类型列表（添加查看权限验证）\r\n+router.get(\r\n+  \"/\",\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"category:type:view\")],\r\n+  categoryTypeController.findAll\r\n+);\r\n \r\n-// 获取单个分类类型（无需特定权限，只需验证令牌）\r\n-router.get(\"/:id\", [authJwt.verifyToken], categoryTypeController.findOne);\r\n+// 获取单个分类类型（添加查看权限验证）\r\n+router.get(\r\n+  \"/:id\",\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"category:type:view\")],\r\n+  categoryTypeController.findOne\r\n+);\r\n \r\n-// 更新分类类型（修改为实际存在的权限）\r\n+// 更新分类类型\r\n\\ No newline at end of file\n router.put(\r\n   \"/:id\",\r\n   [authJwt.verifyToken, authJwt.hasPermission(\"category:type:edit\")],\r\n   categoryTypeController.update\r\n );\r\n \r\n-// 删除分类类型（修改为实际存在的权限）\r\n+// 删除分类类型\r\n router.delete(\r\n   \"/:id\",\r\n   [authJwt.verifyToken, authJwt.hasPermission(\"category:type:delete\")],\r\n   categoryTypeController.delete\r\n );\r\n \r\n-module.exports = router;\n+module.exports = router;\r\n"
                },
                {
                    "date": 1746101201574,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n // 获取分类类型列表（添加查看权限验证）\r\n router.get(\r\n   \"/\",\r\n   [authJwt.verifyToken, authJwt.hasPermission(\"category:type:view\")],\r\n-  categoryTypeController.findAll\r\n+  categoryTypeController.list\r\n );\r\n \r\n // 获取单个分类类型（添加查看权限验证）\r\n router.get(\r\n"
                },
                {
                    "date": 1746138587106,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,8 +16,15 @@\n   [authJwt.verifyToken, authJwt.hasPermission(\"category:type:view\")],\r\n   categoryTypeController.list\r\n );\r\n \r\n+// 获取所有分类类型（不分页）\r\n+router.get(\r\n+  \"/all\",\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"category:type:view\")],\r\n+  categoryTypeController.listAll\r\n+);\r\n+\r\n // 获取单个分类类型（添加查看权限验证）\r\n router.get(\r\n   \"/:id\",\r\n   [authJwt.verifyToken, authJwt.hasPermission(\"category:type:view\")],\r\n"
                },
                {
                    "date": 1746138599006,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,5 +44,5 @@\n   [authJwt.verifyToken, authJwt.hasPermission(\"category:type:delete\")],\r\n   categoryTypeController.delete\r\n );\r\n \r\n-module.exports = router;\n\\ No newline at end of file\n+module.exports = router;\r\n"
                },
                {
                    "date": 1746207847421,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,13 +10,9 @@\n   categoryTypeController.create\r\n );\r\n \r\n // 获取分类类型列表（添加查看权限验证）\r\n-router.get(\r\n-  \"/\",\r\n-  [authJwt.verifyToken, authJwt.hasPermission(\"category:type:view\")],\r\n-  categoryTypeController.list\r\n-);\r\n+router.get(\"/\", categoryTypeController.list);\r\n \r\n // 获取所有分类类型（不分页）\r\n router.get(\r\n   \"/all\",\r\n"
                },
                {
                    "date": 1746207916104,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n   categoryTypeController.create\r\n );\r\n \r\n // 获取分类类型列表（添加查看权限验证）\r\n-router.get(\"/\", categoryTypeController.list);\r\n+router.get(\"/\", [authJwt.verifyToken], categoryTypeController.list);\r\n \r\n // 获取所有分类类型（不分页）\r\n router.get(\r\n   \"/all\",\r\n"
                },
                {
                    "date": 1746207937904,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,13 @@\n   categoryTypeController.create\r\n );\r\n \r\n // 获取分类类型列表（添加查看权限验证）\r\n-router.get(\"/\", [authJwt.verifyToken], categoryTypeController.list);\r\n+router.get(\r\n+  \"/\",\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"category:type:view\")],\r\n+  categoryTypeController.list\r\n+);\r\n \r\n // 获取所有分类类型（不分页）\r\n router.get(\r\n   \"/all\",\r\n"
                },
                {
                    "date": 1746208177199,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,44 +5,47 @@\n \r\n // 创建分类类型\r\n router.post(\r\n   \"/\",\r\n-  [authJwt.verifyToken, authJwt.hasPermission(\"category:type:add\")],\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"category:category-types:add\")],\r\n   categoryTypeController.create\r\n );\r\n \r\n // 获取分类类型列表（添加查看权限验证）\r\n router.get(\r\n   \"/\",\r\n-  [authJwt.verifyToken, authJwt.hasPermission(\"category:type:view\")],\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"category:category-types:view\")],\r\n   categoryTypeController.list\r\n );\r\n \r\n // 获取所有分类类型（不分页）\r\n router.get(\r\n   \"/all\",\r\n-  [authJwt.verifyToken, authJwt.hasPermission(\"category:type:view\")],\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"category:category-types:view\")],\r\n   categoryTypeController.listAll\r\n );\r\n \r\n // 获取单个分类类型（添加查看权限验证）\r\n router.get(\r\n   \"/:id\",\r\n-  [authJwt.verifyToken, authJwt.hasPermission(\"category:type:view\")],\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"category:category-types:view\")],\r\n   categoryTypeController.findOne\r\n );\r\n \r\n // 更新分类类型\r\n router.put(\r\n   \"/:id\",\r\n-  [authJwt.verifyToken, authJwt.hasPermission(\"category:type:edit\")],\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"category:category-types:edit\")],\r\n   categoryTypeController.update\r\n );\r\n \r\n // 删除分类类型\r\n router.delete(\r\n   \"/:id\",\r\n-  [authJwt.verifyToken, authJwt.hasPermission(\"category:type:delete\")],\r\n+  [\r\n+    authJwt.verifyToken,\r\n+    authJwt.hasPermission(\"category:category-types:delete\"),\r\n+  ],\r\n   categoryTypeController.delete\r\n );\r\n \r\n module.exports = router;\r\n"
                }
            ],
            "date": 1745926083374,
            "name": "Commit-0",
            "content": "const express = require('express');\r\nconst router = express.Router();\r\nconst categoryTypeController = require('../controllers/categoryType.controller');\r\nconst { authJwt, rbac } = require('../middlewares');\r\n\r\n// 所有路由都需要JWT认证\r\nrouter.use(authJwt.verifyToken);\r\n\r\n// 创建分类类型\r\nrouter.post(\r\n  '/',\r\n  [rbac.checkPermission('manage_categories')],\r\n  categoryTypeController.create\r\n);\r\n\r\n// 获取分类类型列表\r\nrouter.get(\r\n  '/',\r\n  categoryTypeController.findAll\r\n);\r\n\r\n// 获取单个分类类型\r\nrouter.get(\r\n  '/:id',\r\n  categoryTypeController.findOne\r\n);\r\n\r\n// 更新分类类型\r\nrouter.put(\r\n  '/:id',\r\n  [rbac.checkPermission('manage_categories')],\r\n  categoryTypeController.update\r\n);\r\n\r\n// 删除分类类型\r\nrouter.delete(\r\n  '/:id',\r\n  [rbac.checkPermission('manage_categories')],\r\n  categoryTypeController.delete\r\n);\r\n\r\nmodule.exports = router; "
        }
    ]
}