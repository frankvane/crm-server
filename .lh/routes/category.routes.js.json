{
    "sourceFile": "routes/category.routes.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1746026163305,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1746026199125,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,13 +16,9 @@\n // 获取分类树\r\n router.get(\"/tree\", [authJwt.verifyToken], categoryController.getTree);\r\n \r\n // 获取单个分类\r\n-router.get(\r\n-  \"/:id\",\r\n-  [authJwt.verifyToken],\r\n-  categoryController.getById\r\n-);\r\n+router.get(\"/:id\", [authJwt.verifyToken], categoryController.getById);\r\n \r\n // 更新分类（需要manage_categories权限）\r\n router.put(\r\n   \"/:id\",\r\n"
                },
                {
                    "date": 1746065676427,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,35 +2,35 @@\n const router = express.Router();\r\n const categoryController = require(\"../controllers/category.controller\");\r\n const { authJwt } = require(\"../middlewares\");\r\n \r\n-// 创建分类（需要manage_categories权限）\r\n+// 创建分类（修改为实际存在的权限）\r\n router.post(\r\n   \"/\",\r\n-  [authJwt.verifyToken, authJwt.hasPermission(\"manage_categories\")],\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"category:category:add\")],\r\n   categoryController.create\r\n );\r\n \r\n-// 获取分类列表\r\n+// 获取分类列表（无需特定权限，只需验证令牌）\r\n router.get(\"/\", [authJwt.verifyToken], categoryController.list);\r\n \r\n-// 获取分类树\r\n+// 获取分类树（无需特定权限，只需验证令牌）\r\n router.get(\"/tree\", [authJwt.verifyToken], categoryController.getTree);\r\n \r\n-// 获取单个分类\r\n+// 获取单个分类（无需特定权限，只需验证令牌）\r\n router.get(\"/:id\", [authJwt.verifyToken], categoryController.getById);\r\n \r\n-// 更新分类（需要manage_categories权限）\r\n+// 更新分类（修改为实际存在的权限）\r\n router.put(\r\n   \"/:id\",\r\n-  [authJwt.verifyToken, authJwt.hasPermission(\"manage_categories\")],\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"category:category:edit\")],\r\n   categoryController.update\r\n );\r\n \r\n-// 删除分类（需要manage_categories权限）\r\n+// 删除分类（修改为实际存在的权限）\r\n router.delete(\r\n   \"/:id\",\r\n-  [authJwt.verifyToken, authJwt.hasPermission(\"manage_categories\")],\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"category:category:delete\")],\r\n   categoryController.delete\r\n );\r\n \r\n module.exports = router;\r\n"
                },
                {
                    "date": 1746069548319,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,16 +18,16 @@\n );\r\n \r\n // 获取分类树（添加查看权限验证）\r\n router.get(\r\n-  \"/tree\", \r\n+  \"/tree\",\r\n   [authJwt.verifyToken, authJwt.hasPermission(\"category:category:view\")],\r\n   categoryController.getTree\r\n );\r\n \r\n // 获取单个分类（添加查看权限验证）\r\n router.get(\r\n-  \"/:id\", \r\n+  \"/:id\",\r\n   [authJwt.verifyToken, authJwt.hasPermission(\"category:category:view\")],\r\n   categoryController.getById\r\n );\r\n \r\n"
                },
                {
                    "date": 1747807919885,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,43 +2,156 @@\n const router = express.Router();\r\n const categoryController = require(\"../controllers/category.controller\");\r\n const { authJwt } = require(\"../middlewares\");\r\n \r\n-// 创建分类（使用已存在的权限）\r\n+/**\r\n+ * @swagger\r\n+ * /categories:\r\n+ *   post:\r\n+ *     tags:\r\n+ *       - 分类管理\r\n+ *     summary: 创建分类\r\n+ *     description: 新增一个分类。\r\n+ *     requestBody:\r\n+ *       required: true\r\n+ *       content:\r\n+ *         application/json:\r\n+ *           schema:\r\n+ *             type: object\r\n+ *             properties:\r\n+ *               name:\r\n+ *                 type: string\r\n+ *                 description: 分类名称\r\n+ *     responses:\r\n+ *       200:\r\n+ *         description: 创建成功\r\n+ */\r\n+// 创建分类\r\n router.post(\r\n   \"/\",\r\n   [authJwt.verifyToken, authJwt.hasPermission(\"category:categories:add\")],\r\n   categoryController.create\r\n );\r\n \r\n-// 获取分类列表（添加查看权限验证）\r\n+/**\r\n+ * @swagger\r\n+ * /categories:\r\n+ *   get:\r\n+ *     tags:\r\n+ *       - 分类管理\r\n+ *     summary: 获取分类列表\r\n+ *     description: 获取所有分类，支持分页。\r\n+ *     responses:\r\n+ *       200:\r\n+ *         description: 分类列表\r\n+ */\r\n+// 获取分类列表\r\n router.get(\r\n   \"/\",\r\n   [authJwt.verifyToken, authJwt.hasPermission(\"category:categories:view\")],\r\n   categoryController.list\r\n );\r\n \r\n-// 获取分类树（添加查看权限验证）\r\n+/**\r\n+ * @swagger\r\n+ * /categories/tree:\r\n+ *   get:\r\n+ *     tags:\r\n+ *       - 分类管理\r\n+ *     summary: 获取分类树\r\n+ *     description: 获取分类树结构。\r\n+ *     responses:\r\n+ *       200:\r\n+ *         description: 分类树\r\n+ */\r\n+// 获取分类树\r\n router.get(\r\n   \"/tree\",\r\n   [authJwt.verifyToken, authJwt.hasPermission(\"category:categories:view\")],\r\n   categoryController.getTree\r\n );\r\n \r\n-// 获取单个分类（添加查看权限验证）\r\n+/**\r\n+ * @swagger\r\n+ * /categories/{id}:\r\n+ *   get:\r\n+ *     tags:\r\n+ *       - 分类管理\r\n+ *     summary: 获取单个分类\r\n+ *     description: 根据ID获取分类详情。\r\n+ *     parameters:\r\n+ *       - in: path\r\n+ *         name: id\r\n+ *         schema:\r\n+ *           type: integer\r\n+ *         required: true\r\n+ *         description: 分类ID\r\n+ *     responses:\r\n+ *       200:\r\n+ *         description: 分类详情\r\n+ */\r\n+// 获取单个分类\r\n router.get(\r\n   \"/:id\",\r\n   [authJwt.verifyToken, authJwt.hasPermission(\"category:categories:view\")],\r\n   categoryController.getById\r\n );\r\n \r\n+/**\r\n+ * @swagger\r\n+ * /categories/{id}:\r\n+ *   put:\r\n+ *     tags:\r\n+ *       - 分类管理\r\n+ *     summary: 更新分类\r\n+ *     description: 根据ID更新分类信息。\r\n+ *     parameters:\r\n+ *       - in: path\r\n+ *         name: id\r\n+ *         schema:\r\n+ *           type: integer\r\n+ *         required: true\r\n+ *         description: 分类ID\r\n+ *     requestBody:\r\n+ *       required: true\r\n+ *       content:\r\n+ *         application/json:\r\n+ *           schema:\r\n+ *             type: object\r\n+ *             properties:\r\n+ *               name:\r\n+ *                 type: string\r\n+ *                 description: 分类名称\r\n+ *     responses:\r\n+ *       200:\r\n+ *         description: 更新成功\r\n+ */\r\n // 更新分类\r\n router.put(\r\n   \"/:id\",\r\n   [authJwt.verifyToken, authJwt.hasPermission(\"category:categories:edit\")],\r\n   categoryController.update\r\n );\r\n \r\n+/**\r\n+ * @swagger\r\n+ * /categories/{id}:\r\n+ *   delete:\r\n+ *     tags:\r\n+ *       - 分类管理\r\n+ *     summary: 删除分类\r\n+ *     description: 根据ID删除分类。\r\n+ *     parameters:\r\n+ *       - in: path\r\n+ *         name: id\r\n+ *         schema:\r\n+ *           type: integer\r\n+ *         required: true\r\n+ *         description: 分类ID\r\n+ *     responses:\r\n+ *       200:\r\n+ *         description: 删除成功\r\n+ */\r\n // 删除分类\r\n router.delete(\r\n   \"/:id\",\r\n   [authJwt.verifyToken, authJwt.hasPermission(\"category:categories:delete\")],\r\n"
                }
            ],
            "date": 1746026163305,
            "name": "Commit-0",
            "content": "const express = require(\"express\");\r\nconst router = express.Router();\r\nconst categoryController = require(\"../controllers/category.controller\");\r\nconst { authJwt } = require(\"../middlewares\");\r\n\r\n// 创建分类（需要manage_categories权限）\r\nrouter.post(\r\n  \"/\",\r\n  [authJwt.verifyToken, authJwt.hasPermission(\"manage_categories\")],\r\n  categoryController.create\r\n);\r\n\r\n// 获取分类列表\r\nrouter.get(\"/\", [authJwt.verifyToken], categoryController.list);\r\n\r\n// 获取分类树\r\nrouter.get(\"/tree\", [authJwt.verifyToken], categoryController.getTree);\r\n\r\n// 获取单个分类\r\nrouter.get(\r\n  \"/:id\",\r\n  [authJwt.verifyToken],\r\n  categoryController.getById\r\n);\r\n\r\n// 更新分类（需要manage_categories权限）\r\nrouter.put(\r\n  \"/:id\",\r\n  [authJwt.verifyToken, authJwt.hasPermission(\"manage_categories\")],\r\n  categoryController.update\r\n);\r\n\r\n// 删除分类（需要manage_categories权限）\r\nrouter.delete(\r\n  \"/:id\",\r\n  [authJwt.verifyToken, authJwt.hasPermission(\"manage_categories\")],\r\n  categoryController.delete\r\n);\r\n\r\nmodule.exports = router;\r\n"
        }
    ]
}