{
    "sourceFile": "routes/role.routes.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1745936740995,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1745936820067,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,5 +42,5 @@\n   checkPermission(\"manage_roles\"),\r\n   roleController.deleteRole\r\n );\r\n \r\n-module.exports = router;\n\\ No newline at end of file\n+module.exports = router;\r\n"
                },
                {
                    "date": 1745937080592,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,46 +1,46 @@\n const express = require(\"express\");\r\n const router = express.Router();\r\n const roleController = require(\"../controllers/role.controller\");\r\n-const { authenticateToken, checkPermission } = require(\"../middlewares/auth\");\r\n+const { authenticateToken, hasPermission } = require(\"../middlewares/auth\");\r\n \r\n // 创建角色\r\n router.post(\r\n   \"/\",\r\n   authenticateToken,\r\n-  checkPermission(\"manage_roles\"),\r\n+  hasPermission(\"manage_roles\"),\r\n   roleController.createRole\r\n );\r\n \r\n // 获取角色列表\r\n router.get(\r\n   \"/\",\r\n   authenticateToken,\r\n-  checkPermission(\"view_roles\"),\r\n+  hasPermission(\"view_roles\"),\r\n   roleController.getRoles\r\n );\r\n \r\n // 获取单个角色\r\n router.get(\r\n   \"/:id\",\r\n   authenticateToken,\r\n-  checkPermission(\"view_roles\"),\r\n+  hasPermission(\"view_roles\"),\r\n   roleController.getRole\r\n );\r\n \r\n // 更新角色\r\n router.put(\r\n   \"/:id\",\r\n   authenticateToken,\r\n-  checkPermission(\"manage_roles\"),\r\n+  hasPermission(\"manage_roles\"),\r\n   roleController.updateRole\r\n );\r\n \r\n // 删除角色\r\n router.delete(\r\n   \"/:id\",\r\n   authenticateToken,\r\n-  checkPermission(\"manage_roles\"),\r\n+  hasPermission(\"manage_roles\"),\r\n   roleController.deleteRole\r\n );\r\n \r\n module.exports = router;\r\n"
                },
                {
                    "date": 1745937372087,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,46 +1,41 @@\n const express = require(\"express\");\r\n const router = express.Router();\r\n const roleController = require(\"../controllers/role.controller\");\r\n-const { authenticateToken, hasPermission } = require(\"../middlewares/auth\");\r\n+const { verifyToken, hasPermission } = require(\"../middlewares/auth\");\r\n \r\n // 创建角色\r\n router.post(\r\n   \"/\",\r\n-  authenticateToken,\r\n-  hasPermission(\"manage_roles\"),\r\n+  [verifyToken, hasPermission(\"manage_roles\")],\r\n   roleController.createRole\r\n );\r\n \r\n // 获取角色列表\r\n router.get(\r\n   \"/\",\r\n-  authenticateToken,\r\n-  hasPermission(\"view_roles\"),\r\n+  [verifyToken, hasPermission(\"view_roles\")],\r\n   roleController.getRoles\r\n );\r\n \r\n // 获取单个角色\r\n router.get(\r\n   \"/:id\",\r\n-  authenticateToken,\r\n-  hasPermission(\"view_roles\"),\r\n+  [verifyToken, hasPermission(\"view_roles\")],\r\n   roleController.getRole\r\n );\r\n \r\n // 更新角色\r\n router.put(\r\n   \"/:id\",\r\n-  authenticateToken,\r\n-  hasPermission(\"manage_roles\"),\r\n+  [verifyToken, hasPermission(\"manage_roles\")],\r\n   roleController.updateRole\r\n );\r\n \r\n // 删除角色\r\n router.delete(\r\n   \"/:id\",\r\n-  authenticateToken,\r\n-  hasPermission(\"manage_roles\"),\r\n+  [verifyToken, hasPermission(\"manage_roles\")],\r\n   roleController.deleteRole\r\n );\r\n \r\n module.exports = router;\r\n"
                },
                {
                    "date": 1746065676374,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,41 +1,41 @@\n const express = require(\"express\");\r\n const router = express.Router();\r\n const roleController = require(\"../controllers/role.controller\");\r\n-const { verifyToken, hasPermission } = require(\"../middlewares/auth\");\r\n+const { authJwt } = require(\"../middlewares\");\r\n \r\n // 创建角色\r\n router.post(\r\n   \"/\",\r\n-  [verifyToken, hasPermission(\"manage_roles\")],\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"system:role:add\")],\r\n   roleController.createRole\r\n );\r\n \r\n // 获取角色列表\r\n router.get(\r\n   \"/\",\r\n-  [verifyToken, hasPermission(\"view_roles\")],\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"system:role:edit\")],\r\n   roleController.getRoles\r\n );\r\n \r\n // 获取单个角色\r\n router.get(\r\n   \"/:id\",\r\n-  [verifyToken, hasPermission(\"view_roles\")],\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"system:role:edit\")],\r\n   roleController.getRole\r\n );\r\n \r\n // 更新角色\r\n router.put(\r\n   \"/:id\",\r\n-  [verifyToken, hasPermission(\"manage_roles\")],\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"system:role:edit\")],\r\n   roleController.updateRole\r\n );\r\n \r\n // 删除角色\r\n router.delete(\r\n   \"/:id\",\r\n-  [verifyToken, hasPermission(\"manage_roles\")],\r\n+  [authJwt.verifyToken, authJwt.hasPermission(\"system:role:delete\")],\r\n   roleController.deleteRole\r\n );\r\n \r\n module.exports = router;\r\n"
                }
            ],
            "date": 1745936740995,
            "name": "Commit-0",
            "content": "const express = require(\"express\");\r\nconst router = express.Router();\r\nconst roleController = require(\"../controllers/role.controller\");\r\nconst { authenticateToken, checkPermission } = require(\"../middlewares/auth\");\r\n\r\n// 创建角色\r\nrouter.post(\r\n  \"/\",\r\n  authenticateToken,\r\n  checkPermission(\"manage_roles\"),\r\n  roleController.createRole\r\n);\r\n\r\n// 获取角色列表\r\nrouter.get(\r\n  \"/\",\r\n  authenticateToken,\r\n  checkPermission(\"view_roles\"),\r\n  roleController.getRoles\r\n);\r\n\r\n// 获取单个角色\r\nrouter.get(\r\n  \"/:id\",\r\n  authenticateToken,\r\n  checkPermission(\"view_roles\"),\r\n  roleController.getRole\r\n);\r\n\r\n// 更新角色\r\nrouter.put(\r\n  \"/:id\",\r\n  authenticateToken,\r\n  checkPermission(\"manage_roles\"),\r\n  roleController.updateRole\r\n);\r\n\r\n// 删除角色\r\nrouter.delete(\r\n  \"/:id\",\r\n  authenticateToken,\r\n  checkPermission(\"manage_roles\"),\r\n  roleController.deleteRole\r\n);\r\n\r\nmodule.exports = router;"
        }
    ]
}