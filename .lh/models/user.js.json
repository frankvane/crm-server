{
    "sourceFile": "models/user.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1746011163879,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1746011246273,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,41 +1,45 @@\n-const { DataTypes } = require('sequelize');\r\n+const { DataTypes } = require(\"sequelize\");\r\n \r\n module.exports = (sequelize) => {\r\n-  const User = sequelize.define('User', {\r\n-    username: {\r\n-      type: DataTypes.STRING,\r\n-      allowNull: false,\r\n-      unique: true\r\n+  const User = sequelize.define(\r\n+    \"User\",\r\n+    {\r\n+      username: {\r\n+        type: DataTypes.STRING,\r\n+        allowNull: false,\r\n+        unique: true,\r\n+      },\r\n+      password: {\r\n+        type: DataTypes.STRING,\r\n+        allowNull: false,\r\n+      },\r\n+      email: {\r\n+        type: DataTypes.STRING,\r\n+        allowNull: true,\r\n+      },\r\n+      status: {\r\n+        type: DataTypes.INTEGER, // 改用INTEGER类型\r\n+        allowNull: false,\r\n+        defaultValue: 1, // 1 表示激活，0 表示未激活\r\n+        validate: {\r\n+          isIn: [[0, 1]], // 只允许 0 或 1\r\n+        },\r\n+      },\r\n     },\r\n-    password: {\r\n-      type: DataTypes.STRING,\r\n-      allowNull: false\r\n-    },\r\n-    email: {\r\n-      type: DataTypes.STRING,\r\n-      allowNull: true\r\n\\ No newline at end of file\n-    },\r\n-    status: {\r\n-      type: DataTypes.INTEGER,  // 改用INTEGER类型\r\n-      allowNull: false,\r\n-      defaultValue: 1,  // 1 表示激活，0 表示未激活\r\n-      validate: {\r\n-        isIn: [[0, 1]]  // 只允许 0 或 1\r\n-      }\r\n+    {\r\n+      tableName: \"Users\",\r\n+      timestamps: true,\r\n     }\r\n-  }, {\r\n-    tableName: 'Users',\r\n-    timestamps: true\r\n-  });\r\n+  );\r\n \r\n   User.associate = (models) => {\r\n     User.belongsToMany(models.Role, {\r\n-      through: 'UserRoles',\r\n-      foreignKey: 'userId',\r\n-      otherKey: 'roleId',\r\n-      as: 'roles'\r\n+      through: \"UserRoles\",\r\n+      foreignKey: \"userId\",\r\n+      otherKey: \"roleId\",\r\n+      as: \"roles\",\r\n     });\r\n   };\r\n \r\n   return User;\r\n-}; \n+};\r\n"
                },
                {
                    "date": 1746011294680,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,8 @@\n     {\r\n       username: {\r\n         type: DataTypes.STRING,\r\n         allowNull: false,\r\n-        unique: true,\r\n       },\r\n       password: {\r\n         type: DataTypes.STRING,\r\n         allowNull: false,\r\n@@ -28,8 +27,14 @@\n     },\r\n     {\r\n       tableName: \"Users\",\r\n       timestamps: true,\r\n+      indexes: [\r\n+        {\r\n+          unique: true,\r\n+          fields: [\"username\"],\r\n+        },\r\n+      ],\r\n     }\r\n   );\r\n \r\n   User.associate = (models) => {\r\n"
                },
                {
                    "date": 1746013383678,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,50 +1,1 @@\n-const { DataTypes } = require(\"sequelize\");\r\n-\r\n-module.exports = (sequelize) => {\r\n-  const User = sequelize.define(\r\n-    \"User\",\r\n-    {\r\n-      username: {\r\n-        type: DataTypes.STRING,\r\n-        allowNull: false,\r\n-      },\r\n-      password: {\r\n-        type: DataTypes.STRING,\r\n-        allowNull: false,\r\n-      },\r\n-      email: {\r\n-        type: DataTypes.STRING,\r\n-        allowNull: true,\r\n-      },\r\n-      status: {\r\n-        type: DataTypes.INTEGER, // 改用INTEGER类型\r\n-        allowNull: false,\r\n-        defaultValue: 1, // 1 表示激活，0 表示未激活\r\n-        validate: {\r\n-          isIn: [[0, 1]], // 只允许 0 或 1\r\n-        },\r\n-      },\r\n-    },\r\n-    {\r\n-      tableName: \"Users\",\r\n-      timestamps: true,\r\n-      indexes: [\r\n-        {\r\n-          unique: true,\r\n-          fields: [\"username\"],\r\n-        },\r\n-      ],\r\n-    }\r\n-  );\r\n-\r\n-  User.associate = (models) => {\r\n-    User.belongsToMany(models.Role, {\r\n-      through: \"UserRoles\",\r\n-      foreignKey: \"userId\",\r\n-      otherKey: \"roleId\",\r\n-      as: \"roles\",\r\n-    });\r\n-  };\r\n-\r\n-  return User;\r\n-};\r\n+ \n\\ No newline at end of file\n"
                }
            ],
            "date": 1746011163879,
            "name": "Commit-0",
            "content": "const { DataTypes } = require('sequelize');\r\n\r\nmodule.exports = (sequelize) => {\r\n  const User = sequelize.define('User', {\r\n    username: {\r\n      type: DataTypes.STRING,\r\n      allowNull: false,\r\n      unique: true\r\n    },\r\n    password: {\r\n      type: DataTypes.STRING,\r\n      allowNull: false\r\n    },\r\n    email: {\r\n      type: DataTypes.STRING,\r\n      allowNull: true\r\n    },\r\n    status: {\r\n      type: DataTypes.INTEGER,  // 改用INTEGER类型\r\n      allowNull: false,\r\n      defaultValue: 1,  // 1 表示激活，0 表示未激活\r\n      validate: {\r\n        isIn: [[0, 1]]  // 只允许 0 或 1\r\n      }\r\n    }\r\n  }, {\r\n    tableName: 'Users',\r\n    timestamps: true\r\n  });\r\n\r\n  User.associate = (models) => {\r\n    User.belongsToMany(models.Role, {\r\n      through: 'UserRoles',\r\n      foreignKey: 'userId',\r\n      otherKey: 'roleId',\r\n      as: 'roles'\r\n    });\r\n  };\r\n\r\n  return User;\r\n}; "
        }
    ]
}