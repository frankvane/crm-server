{
    "sourceFile": "models/resourceAction.model.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1746008161432,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1746008190074,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,45 @@\n+const { DataTypes } = require(\"sequelize\");\r\n+\r\n+module.exports = (sequelize) => {\r\n+  const ResourceAction = sequelize.define(\"ResourceAction\", {\r\n+    name: {\r\n+      type: DataTypes.STRING,\r\n+      allowNull: false,\r\n+      comment: \"操作名称，如'添加'、'编辑'\",\r\n+    },\r\n+    code: {\r\n+      type: DataTypes.STRING,\r\n+      allowNull: false,\r\n+      comment: \"操作代码，如'add'、'edit'、'get'\",\r\n+    },\r\n+    description: {\r\n+      type: DataTypes.STRING,\r\n+      allowNull: true,\r\n+      comment: \"操作描述\",\r\n+    },\r\n+    icon: {\r\n+      type: DataTypes.STRING,\r\n+      allowNull: true,\r\n+      comment: \"操作图标\",\r\n+    },\r\n+    sort: {\r\n+      type: DataTypes.INTEGER,\r\n+      allowNull: false,\r\n+      defaultValue: 0,\r\n+      comment: \"排序\",\r\n+    },\r\n+    needConfirm: {\r\n+      type: DataTypes.BOOLEAN,\r\n+      allowNull: false,\r\n+      defaultValue: false,\r\n+      comment: \"是否需要二次确认\",\r\n+    },\r\n+    confirmMessage: {\r\n+      type: DataTypes.STRING,\r\n+      allowNull: true,\r\n+      comment: \"确认提示信息\",\r\n+    },\r\n+  });\r\n+\r\n+  return ResourceAction;\r\n+};\r\n"
                },
                {
                    "date": 1746008210810,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,5 +42,4 @@\n   });\r\n \r\n   return ResourceAction;\r\n };\r\n- \n\\ No newline at end of file\n"
                },
                {
                    "date": 1746057067986,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,8 +38,27 @@\n       type: DataTypes.STRING,\r\n       allowNull: true,\r\n       comment: \"确认提示信息\",\r\n     },\r\n+    resourceId: {\r\n+      type: DataTypes.INTEGER,\r\n+      allowNull: false,\r\n+      comment: \"关联的资源ID\",\r\n+    }\r\n   });\r\n \r\n+  ResourceAction.associate = (models) => {\r\n+    // 与资源的多对一关系\r\n+    ResourceAction.belongsTo(models.Resource, {\r\n+      foreignKey: 'resourceId',\r\n+      as: 'resource'\r\n+    });\r\n+\r\n+    // 与权限的一对一关系\r\n+    ResourceAction.hasOne(models.Permission, {\r\n+      foreignKey: 'actionId',\r\n+      as: 'permission'\r\n+    });\r\n+  };\r\n+\r\n   return ResourceAction;\r\n };\r\n"
                },
                {
                    "date": 1746057427281,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,22 +42,22 @@\n     resourceId: {\r\n       type: DataTypes.INTEGER,\r\n       allowNull: false,\r\n       comment: \"关联的资源ID\",\r\n-    }\r\n+    },\r\n   });\r\n \r\n   ResourceAction.associate = (models) => {\r\n     // 与资源的多对一关系\r\n     ResourceAction.belongsTo(models.Resource, {\r\n-      foreignKey: 'resourceId',\r\n-      as: 'resource'\r\n+      foreignKey: \"resourceId\",\r\n+      as: \"resource\",\r\n     });\r\n \r\n     // 与权限的一对一关系\r\n     ResourceAction.hasOne(models.Permission, {\r\n-      foreignKey: 'actionId',\r\n-      as: 'permission'\r\n+      foreignKey: \"actionId\",\r\n+      as: \"permission\",\r\n     });\r\n   };\r\n \r\n   return ResourceAction;\r\n"
                },
                {
                    "date": 1746059057176,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,8 +42,14 @@\n     resourceId: {\r\n       type: DataTypes.INTEGER,\r\n       allowNull: false,\r\n       comment: \"关联的资源ID\",\r\n+      references: {\r\n+        model: \"Resources\",\r\n+        key: \"id\",\r\n+      },\r\n+      onUpdate: \"CASCADE\",\r\n+      onDelete: \"CASCADE\",\r\n     },\r\n   });\r\n \r\n   ResourceAction.associate = (models) => {\r\n"
                },
                {
                    "date": 1746589098594,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,17 +36,17 @@\n       resourceId: {\r\n         type: DataTypes.INTEGER,\r\n         allowNull: false,\r\n         references: {\r\n-          model: \"Resources\",\r\n+          model: \"resources\",\r\n           key: \"id\",\r\n         },\r\n         onUpdate: \"NO ACTION\",\r\n         onDelete: \"NO ACTION\",\r\n       },\r\n     },\r\n     {\r\n-      tableName: \"resourceactions\",\r\n+      tableName: \"resource_actions\",\r\n     }\r\n   );\r\n \r\n   ResourceAction.associate = (models) => {\r\n"
                }
            ],
            "date": 1746008161432,
            "name": "Commit-0",
            "content": " "
        }
    ]
}