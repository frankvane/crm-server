{
    "sourceFile": "docs/api/role.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1746072850088,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1746072850088,
            "name": "Commit-0",
            "content": "# 角色管理接口文档\r\n\r\n## 1. 创建角色\r\n\r\n- **接口**：`POST /api/roles`\r\n- **描述**：创建新角色（需要 system:role:add 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **请求体**：\r\n  ```json\r\n  {\r\n    \"name\": \"string\",\r\n    \"code\": \"string\",\r\n    \"description\": \"string\",\r\n    \"permissionIds\": \"number[]\"\r\n  }\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Role created successfully\",\r\n    \"data\": {\r\n      \"id\": \"number\",\r\n      \"name\": \"string\",\r\n      \"code\": \"string\",\r\n      \"description\": \"string\",\r\n      \"permissions\": [\r\n        {\r\n          \"id\": \"number\",\r\n          \"name\": \"string\",\r\n          \"code\": \"string\"\r\n        }\r\n      ]\r\n    }\r\n  }\r\n  ```\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Role name already exists\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n\r\n## 2. 获取角色列表\r\n\r\n- **接口**：`GET /api/roles`\r\n- **描述**：获取角色列表（需要 system:role:edit 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **查询参数**：\r\n  - `page`: 页码（默认：1）\r\n  - `pageSize`: 每页数量（默认：10）\r\n  - `search`: 搜索关键词\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Success\",\r\n    \"data\": {\r\n      \"list\": [\r\n        {\r\n          \"id\": \"number\",\r\n          \"name\": \"string\",\r\n          \"code\": \"string\",\r\n          \"description\": \"string\",\r\n          \"permissions\": [\r\n            {\r\n              \"id\": \"number\",\r\n              \"name\": \"string\",\r\n              \"code\": \"string\"\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      \"pagination\": {\r\n        \"current\": \"number\",\r\n        \"pageSize\": \"number\",\r\n        \"total\": \"number\"\r\n      }\r\n    }\r\n  }\r\n  ```\r\n\r\n## 3. 获取单个角色\r\n\r\n- **接口**：`GET /api/roles/:id`\r\n- **描述**：获取指定角色信息（需要 system:role:edit 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Success\",\r\n    \"data\": {\r\n      \"id\": \"number\",\r\n      \"name\": \"string\",\r\n      \"code\": \"string\",\r\n      \"description\": \"string\",\r\n      \"permissions\": [\r\n        {\r\n          \"id\": \"number\",\r\n          \"name\": \"string\",\r\n          \"code\": \"string\"\r\n        }\r\n      ],\r\n      \"resources\": [\r\n        {\r\n          \"id\": \"number\",\r\n          \"name\": \"string\",\r\n          \"code\": \"string\",\r\n          \"type\": \"string\"\r\n        }\r\n      ]\r\n    }\r\n  }\r\n  ```\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Role not found\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n\r\n## 4. 更新角色\r\n\r\n- **接口**：`PUT /api/roles/:id`\r\n- **描述**：更新指定角色信息（需要 system:role:edit 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **请求体**：\r\n  ```json\r\n  {\r\n    \"name\": \"string\",\r\n    \"code\": \"string\",\r\n    \"description\": \"string\",\r\n    \"permissionIds\": \"number[]\"\r\n  }\r\n  ```\r\n- **响应**：与获取单个角色接口相同\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Role name already exists\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n  或\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Role not found\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n\r\n## 5. 删除角色\r\n\r\n- **接口**：`DELETE /api/roles/:id`\r\n- **描述**：删除指定角色（需要 system:role:delete 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Role deleted successfully\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Cannot delete role with associated users\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n  或\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Role not found\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n\r\n## 6. 为角色分配权限\r\n\r\n- **接口**：`PUT /api/roles/:id/permissions`\r\n- **描述**：为指定角色分配权限（需要 system:role:assign 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **请求体**：\r\n  ```json\r\n  {\r\n    \"permissionIds\": \"number[]\"\r\n  }\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Permissions assigned successfully\",\r\n    \"data\": {\r\n      \"id\": \"number\",\r\n      \"name\": \"string\",\r\n      \"code\": \"string\",\r\n      \"permissions\": [\r\n        {\r\n          \"id\": \"number\",\r\n          \"name\": \"string\",\r\n          \"code\": \"string\"\r\n        }\r\n      ]\r\n    }\r\n  }\r\n  ```\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Role not found\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n\r\n## 7. 为角色分配资源\r\n\r\n- **接口**：`PUT /api/roles/:id/resources`\r\n- **描述**：为指定角色分配资源（需要 system:role:assign 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **请求体**：\r\n  ```json\r\n  {\r\n    \"resources\": [\r\n      {\r\n        \"resourceId\": \"number\",\r\n        \"permissionIds\": \"number[]\"\r\n      }\r\n    ]\r\n  }\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Resources assigned successfully\",\r\n    \"data\": {\r\n      \"id\": \"number\",\r\n      \"name\": \"string\",\r\n      \"code\": \"string\",\r\n      \"resources\": [\r\n        {\r\n          \"id\": \"number\",\r\n          \"name\": \"string\",\r\n          \"code\": \"string\",\r\n          \"type\": \"string\",\r\n          \"permissions\": [\r\n            {\r\n              \"id\": \"number\",\r\n              \"name\": \"string\",\r\n              \"code\": \"string\"\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    }\r\n  }\r\n  ```\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Role not found\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n"
        }
    ]
}