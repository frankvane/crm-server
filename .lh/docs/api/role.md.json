{
    "sourceFile": "docs/api/role.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1746072850088,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1746143377760,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,8 +27,9 @@\n       \"id\": \"number\",\r\n       \"name\": \"string\",\r\n       \"code\": \"string\",\r\n       \"description\": \"string\",\r\n+      \"status\": \"number\",\r\n       \"permissions\": [\r\n         {\r\n           \"id\": \"number\",\r\n           \"name\": \"string\",\r\n@@ -58,9 +59,28 @@\n   ```\r\n - **查询参数**：\r\n   - `page`: 页码（默认：1）\r\n   - `pageSize`: 每页数量（默认：10）\r\n-  - `search`: 搜索关键词\r\n+  - `search`: 搜索关键词（支持角色名称、编码、描述的模糊查询）\r\n+  - `name`: 角色名称（支持模糊查询）\r\n+  - `code`: 角色编码（支持模糊查询）\r\n+  - `status`: 角色状态（1: 启用, 0: 禁用）\r\n+\r\n+- **查询示例**：\r\n+  ```\r\n+  # 全字段搜索\r\n+  GET /api/roles?search=管理员\r\n+\r\n+  # 指定字段搜索\r\n+  GET /api/roles?name=系统&code=SYSTEM\r\n+\r\n+  # 状态筛选\r\n+  GET /api/roles?status=1\r\n+\r\n+  # 组合查询\r\n+  GET /api/roles?name=管理员&status=1&page=1&pageSize=10\r\n+  ```\r\n+\r\n - **响应**：\r\n   ```json\r\n   {\r\n     \"success\": true,\r\n@@ -71,8 +91,9 @@\n           \"id\": \"number\",\r\n           \"name\": \"string\",\r\n           \"code\": \"string\",\r\n           \"description\": \"string\",\r\n+          \"status\": \"number\",\r\n           \"permissions\": [\r\n             {\r\n               \"id\": \"number\",\r\n               \"name\": \"string\",\r\n@@ -108,8 +129,9 @@\n       \"id\": \"number\",\r\n       \"name\": \"string\",\r\n       \"code\": \"string\",\r\n       \"description\": \"string\",\r\n+      \"status\": \"number\",\r\n       \"permissions\": [\r\n         {\r\n           \"id\": \"number\",\r\n           \"name\": \"string\",\r\n"
                },
                {
                    "date": 1746143405821,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -174,8 +174,9 @@\n   {\r\n     \"name\": \"string\",\r\n     \"code\": \"string\",\r\n     \"description\": \"string\",\r\n+    \"status\": \"number\",\r\n     \"permissionIds\": \"number[]\"\r\n   }\r\n   ```\r\n - **响应**：与获取单个角色接口相同\r\n@@ -229,37 +230,68 @@\n     \"data\": null\r\n   }\r\n   ```\r\n \r\n-## 6. 为角色分配权限\r\n+## 6. 切换角色状态\r\n \r\n-- **接口**：`PUT /api/roles/:id/permissions`\r\n-- **描述**：为指定角色分配权限（需要 system:role:assign 权限）\r\n+- **接口**：`PUT /api/roles/:id/toggle-status`\r\n+- **描述**：启用或禁用指定角色（需要 system:role:edit 权限）\r\n - **认证**：需要有效的访问令牌（Bearer Token）\r\n - **请求头**：\r\n   ```\r\n   Authorization: Bearer <accessToken>\r\n   ```\r\n+- **响应**：\r\n+  ```json\r\n+  {\r\n+    \"success\": true,\r\n+    \"message\": \"Role enabled/disabled successfully\",\r\n+    \"data\": {\r\n+      \"id\": \"number\",\r\n+      \"status\": \"number\"\r\n+    }\r\n+  }\r\n+  ```\r\n+- **错误响应**：\r\n+  ```json\r\n+  {\r\n+    \"success\": false,\r\n+    \"message\": \"Role not found\",\r\n+    \"data\": null\r\n+  }\r\n+  ```\r\n+\r\n+## 7. 分配资源\r\n+\r\n+- **接口**：`POST /api/roles/:roleId/resources`\r\n+- **描述**：为指定角色分配资源（需要 system:role:edit 权限）\r\n+- **认证**：需要有效的访问令牌（Bearer Token）\r\n+- **请求头**：\r\n+  ```\r\n+  Authorization: Bearer <accessToken>\r\n+  ```\r\n - **请求体**：\r\n   ```json\r\n   {\r\n-    \"permissionIds\": \"number[]\"\r\n+    \"resourceIds\": \"number[]\"\r\n   }\r\n   ```\r\n - **响应**：\r\n   ```json\r\n   {\r\n     \"success\": true,\r\n-    \"message\": \"Permissions assigned successfully\",\r\n+    \"message\": \"Resources assigned successfully\",\r\n     \"data\": {\r\n       \"id\": \"number\",\r\n       \"name\": \"string\",\r\n       \"code\": \"string\",\r\n-      \"permissions\": [\r\n+      \"status\": \"number\",\r\n+      \"resources\": [\r\n         {\r\n           \"id\": \"number\",\r\n           \"name\": \"string\",\r\n-          \"code\": \"string\"\r\n+          \"code\": \"string\",\r\n+          \"type\": \"string\"\r\n         }\r\n       ]\r\n     }\r\n   }\r\n@@ -272,50 +304,38 @@\n     \"data\": null\r\n   }\r\n   ```\r\n \r\n-## 7. 为角色分配资源\r\n+## 8. 分配权限\r\n \r\n-- **接口**：`PUT /api/roles/:id/resources`\r\n-- **描述**：为指定角色分配资源（需要 system:role:assign 权限）\r\n+- **接口**：`POST /api/roles/:roleId/permissions`\r\n+- **描述**：为指定角色分配权限（需要 system:role:edit 权限）\r\n - **认证**：需要有效的访问令牌（Bearer Token）\r\n - **请求头**：\r\n   ```\r\n   Authorization: Bearer <accessToken>\r\n   ```\r\n - **请求体**：\r\n   ```json\r\n   {\r\n-    \"resources\": [\r\n-      {\r\n-        \"resourceId\": \"number\",\r\n-        \"permissionIds\": \"number[]\"\r\n-      }\r\n-    ]\r\n+    \"permissionIds\": \"number[]\"\r\n   }\r\n   ```\r\n - **响应**：\r\n   ```json\r\n   {\r\n     \"success\": true,\r\n-    \"message\": \"Resources assigned successfully\",\r\n+    \"message\": \"Permissions assigned successfully\",\r\n     \"data\": {\r\n       \"id\": \"number\",\r\n       \"name\": \"string\",\r\n       \"code\": \"string\",\r\n-      \"resources\": [\r\n+      \"status\": \"number\",\r\n+      \"permissions\": [\r\n         {\r\n           \"id\": \"number\",\r\n           \"name\": \"string\",\r\n-          \"code\": \"string\",\r\n-          \"type\": \"string\",\r\n-          \"permissions\": [\r\n-            {\r\n-              \"id\": \"number\",\r\n-              \"name\": \"string\",\r\n-              \"code\": \"string\"\r\n-            }\r\n-          ]\r\n+          \"code\": \"string\"\r\n         }\r\n       ]\r\n     }\r\n   }\r\n"
                },
                {
                    "date": 1746143420523,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,16 +57,18 @@\n   ```\r\n   Authorization: Bearer <accessToken>\r\n   ```\r\n - **查询参数**：\r\n+\r\n   - `page`: 页码（默认：1）\r\n   - `pageSize`: 每页数量（默认：10）\r\n   - `search`: 搜索关键词（支持角色名称、编码、描述的模糊查询）\r\n   - `name`: 角色名称（支持模糊查询）\r\n   - `code`: 角色编码（支持模糊查询）\r\n   - `status`: 角色状态（1: 启用, 0: 禁用）\r\n \r\n - **查询示例**：\r\n+\r\n   ```\r\n   # 全字段搜索\r\n   GET /api/roles?search=管理员\r\n \r\n"
                },
                {
                    "date": 1746143661985,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,10 +47,63 @@\n     \"data\": null\r\n   }\r\n   ```\r\n \r\n-## 2. 获取角色列表\r\n+## 2. 获取所有角色\r\n \r\n+- **接口**：`GET /api/roles/all`\r\n+- **描述**：获取所有角色（不分页）（需要 system:role:edit 权限）\r\n+- **认证**：需要有效的访问令牌（Bearer Token）\r\n+- **请求头**：\r\n+  ```\r\n+  Authorization: Bearer <accessToken>\r\n+  ```\r\n+- **查询参数**：\r\n+  - `status`: 角色状态（1: 启用, 0: 禁用）\r\n+\r\n+- **查询示例**：\r\n+  ```\r\n+  # 获取所有角色\r\n+  GET /api/roles/all\r\n+\r\n+  # 获取所有启用的角色\r\n+  GET /api/roles/all?status=1\r\n+  ```\r\n+\r\n+- **响应**：\r\n+  ```json\r\n+  {\r\n+    \"success\": true,\r\n+    \"message\": \"Success\",\r\n+    \"data\": [\r\n+      {\r\n+        \"id\": \"number\",\r\n+        \"name\": \"string\",\r\n+        \"code\": \"string\",\r\n+        \"description\": \"string\",\r\n+        \"status\": \"number\",\r\n+        \"permissions\": [\r\n+          {\r\n+            \"id\": \"number\",\r\n+            \"name\": \"string\",\r\n+            \"code\": \"string\"\r\n+          }\r\n+        ]\r\n+      }\r\n+    ]\r\n+  }\r\n+  ```\r\n+- **错误响应**：\r\n+  ```json\r\n+  {\r\n+    \"success\": false,\r\n+    \"message\": \"Internal Server Error\",\r\n+    \"data\": null\r\n+  }\r\n+  ```\r\n+\r\n+## 3. 获取角色列表\r\n+\r\n - **接口**：`GET /api/roles`\r\n - **描述**：获取角色列表（需要 system:role:edit 权限）\r\n - **认证**：需要有效的访问令牌（Bearer Token）\r\n - **请求头**：\r\n@@ -112,9 +165,9 @@\n     }\r\n   }\r\n   ```\r\n \r\n-## 3. 获取单个角色\r\n+## 4. 获取单个角色\r\n \r\n - **接口**：`GET /api/roles/:id`\r\n - **描述**：获取指定角色信息（需要 system:role:edit 权限）\r\n - **认证**：需要有效的访问令牌（Bearer Token）\r\n@@ -159,9 +212,9 @@\n     \"data\": null\r\n   }\r\n   ```\r\n \r\n-## 4. 更新角色\r\n+## 5. 更新角色\r\n \r\n - **接口**：`PUT /api/roles/:id`\r\n - **描述**：更新指定角色信息（需要 system:role:edit 权限）\r\n - **认证**：需要有效的访问令牌（Bearer Token）\r\n@@ -196,9 +249,9 @@\n     \"data\": null\r\n   }\r\n   ```\r\n \r\n-## 5. 删除角色\r\n+## 6. 删除角色\r\n \r\n - **接口**：`DELETE /api/roles/:id`\r\n - **描述**：删除指定角色（需要 system:role:delete 权限）\r\n - **认证**：需要有效的访问令牌（Bearer Token）\r\n@@ -230,9 +283,9 @@\n     \"data\": null\r\n   }\r\n   ```\r\n \r\n-## 6. 切换角色状态\r\n+## 7. 切换角色状态\r\n \r\n - **接口**：`PUT /api/roles/:id/toggle-status`\r\n - **描述**：启用或禁用指定角色（需要 system:role:edit 权限）\r\n - **认证**：需要有效的访问令牌（Bearer Token）\r\n@@ -259,9 +312,9 @@\n     \"data\": null\r\n   }\r\n   ```\r\n \r\n-## 7. 分配资源\r\n+## 8. 分配资源\r\n \r\n - **接口**：`POST /api/roles/:roleId/resources`\r\n - **描述**：为指定角色分配资源（需要 system:role:edit 权限）\r\n - **认证**：需要有效的访问令牌（Bearer Token）\r\n@@ -304,9 +357,9 @@\n     \"data\": null\r\n   }\r\n   ```\r\n \r\n-## 8. 分配权限\r\n+## 9. 分配权限\r\n \r\n - **接口**：`POST /api/roles/:roleId/permissions`\r\n - **描述**：为指定角色分配权限（需要 system:role:edit 权限）\r\n - **认证**：需要有效的访问令牌（Bearer Token）\r\n"
                },
                {
                    "date": 1746143674255,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,11 +57,13 @@\n   ```\r\n   Authorization: Bearer <accessToken>\r\n   ```\r\n - **查询参数**：\r\n+\r\n   - `status`: 角色状态（1: 启用, 0: 禁用）\r\n \r\n - **查询示例**：\r\n+\r\n   ```\r\n   # 获取所有角色\r\n   GET /api/roles/all\r\n \r\n"
                }
            ],
            "date": 1746072850088,
            "name": "Commit-0",
            "content": "# 角色管理接口文档\r\n\r\n## 1. 创建角色\r\n\r\n- **接口**：`POST /api/roles`\r\n- **描述**：创建新角色（需要 system:role:add 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **请求体**：\r\n  ```json\r\n  {\r\n    \"name\": \"string\",\r\n    \"code\": \"string\",\r\n    \"description\": \"string\",\r\n    \"permissionIds\": \"number[]\"\r\n  }\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Role created successfully\",\r\n    \"data\": {\r\n      \"id\": \"number\",\r\n      \"name\": \"string\",\r\n      \"code\": \"string\",\r\n      \"description\": \"string\",\r\n      \"permissions\": [\r\n        {\r\n          \"id\": \"number\",\r\n          \"name\": \"string\",\r\n          \"code\": \"string\"\r\n        }\r\n      ]\r\n    }\r\n  }\r\n  ```\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Role name already exists\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n\r\n## 2. 获取角色列表\r\n\r\n- **接口**：`GET /api/roles`\r\n- **描述**：获取角色列表（需要 system:role:edit 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **查询参数**：\r\n  - `page`: 页码（默认：1）\r\n  - `pageSize`: 每页数量（默认：10）\r\n  - `search`: 搜索关键词\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Success\",\r\n    \"data\": {\r\n      \"list\": [\r\n        {\r\n          \"id\": \"number\",\r\n          \"name\": \"string\",\r\n          \"code\": \"string\",\r\n          \"description\": \"string\",\r\n          \"permissions\": [\r\n            {\r\n              \"id\": \"number\",\r\n              \"name\": \"string\",\r\n              \"code\": \"string\"\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      \"pagination\": {\r\n        \"current\": \"number\",\r\n        \"pageSize\": \"number\",\r\n        \"total\": \"number\"\r\n      }\r\n    }\r\n  }\r\n  ```\r\n\r\n## 3. 获取单个角色\r\n\r\n- **接口**：`GET /api/roles/:id`\r\n- **描述**：获取指定角色信息（需要 system:role:edit 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Success\",\r\n    \"data\": {\r\n      \"id\": \"number\",\r\n      \"name\": \"string\",\r\n      \"code\": \"string\",\r\n      \"description\": \"string\",\r\n      \"permissions\": [\r\n        {\r\n          \"id\": \"number\",\r\n          \"name\": \"string\",\r\n          \"code\": \"string\"\r\n        }\r\n      ],\r\n      \"resources\": [\r\n        {\r\n          \"id\": \"number\",\r\n          \"name\": \"string\",\r\n          \"code\": \"string\",\r\n          \"type\": \"string\"\r\n        }\r\n      ]\r\n    }\r\n  }\r\n  ```\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Role not found\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n\r\n## 4. 更新角色\r\n\r\n- **接口**：`PUT /api/roles/:id`\r\n- **描述**：更新指定角色信息（需要 system:role:edit 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **请求体**：\r\n  ```json\r\n  {\r\n    \"name\": \"string\",\r\n    \"code\": \"string\",\r\n    \"description\": \"string\",\r\n    \"permissionIds\": \"number[]\"\r\n  }\r\n  ```\r\n- **响应**：与获取单个角色接口相同\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Role name already exists\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n  或\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Role not found\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n\r\n## 5. 删除角色\r\n\r\n- **接口**：`DELETE /api/roles/:id`\r\n- **描述**：删除指定角色（需要 system:role:delete 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Role deleted successfully\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Cannot delete role with associated users\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n  或\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Role not found\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n\r\n## 6. 为角色分配权限\r\n\r\n- **接口**：`PUT /api/roles/:id/permissions`\r\n- **描述**：为指定角色分配权限（需要 system:role:assign 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **请求体**：\r\n  ```json\r\n  {\r\n    \"permissionIds\": \"number[]\"\r\n  }\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Permissions assigned successfully\",\r\n    \"data\": {\r\n      \"id\": \"number\",\r\n      \"name\": \"string\",\r\n      \"code\": \"string\",\r\n      \"permissions\": [\r\n        {\r\n          \"id\": \"number\",\r\n          \"name\": \"string\",\r\n          \"code\": \"string\"\r\n        }\r\n      ]\r\n    }\r\n  }\r\n  ```\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Role not found\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n\r\n## 7. 为角色分配资源\r\n\r\n- **接口**：`PUT /api/roles/:id/resources`\r\n- **描述**：为指定角色分配资源（需要 system:role:assign 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **请求体**：\r\n  ```json\r\n  {\r\n    \"resources\": [\r\n      {\r\n        \"resourceId\": \"number\",\r\n        \"permissionIds\": \"number[]\"\r\n      }\r\n    ]\r\n  }\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Resources assigned successfully\",\r\n    \"data\": {\r\n      \"id\": \"number\",\r\n      \"name\": \"string\",\r\n      \"code\": \"string\",\r\n      \"resources\": [\r\n        {\r\n          \"id\": \"number\",\r\n          \"name\": \"string\",\r\n          \"code\": \"string\",\r\n          \"type\": \"string\",\r\n          \"permissions\": [\r\n            {\r\n              \"id\": \"number\",\r\n              \"name\": \"string\",\r\n              \"code\": \"string\"\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    }\r\n  }\r\n  ```\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Role not found\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n"
        }
    ]
}