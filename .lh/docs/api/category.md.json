{
    "sourceFile": "docs/api/category.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1746072850089,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1746072850089,
            "name": "Commit-0",
            "content": "# 分类类型接口文档\r\n\r\n## 1. 创建分类类型\r\n\r\n- **接口**：`POST /api/category-types`\r\n- **描述**：创建新的分类类型（需要 system:category:type:add 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **请求体**：\r\n  ```json\r\n  {\r\n    \"name\": \"string\",\r\n    \"code\": \"string\",\r\n    \"description\": \"string\",\r\n    \"status\": \"boolean\"\r\n  }\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Category type created successfully\",\r\n    \"data\": {\r\n      \"id\": \"number\",\r\n      \"name\": \"string\",\r\n      \"code\": \"string\",\r\n      \"description\": \"string\",\r\n      \"status\": \"boolean\",\r\n      \"createdAt\": \"string\",\r\n      \"updatedAt\": \"string\"\r\n    }\r\n  }\r\n  ```\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Category type code already exists\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n\r\n## 2. 获取分类类型列表\r\n\r\n- **接口**：`GET /api/category-types`\r\n- **描述**：获取所有分类类型（需要 system:category:type:view 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Success\",\r\n    \"data\": [\r\n      {\r\n        \"id\": \"number\",\r\n        \"name\": \"string\",\r\n        \"code\": \"string\",\r\n        \"description\": \"string\",\r\n        \"status\": \"boolean\",\r\n        \"createdAt\": \"string\",\r\n        \"updatedAt\": \"string\"\r\n      }\r\n    ]\r\n  }\r\n  ```\r\n\r\n## 3. 获取单个分类类型\r\n\r\n- **接口**：`GET /api/category-types/:id`\r\n- **描述**：获取指定分类类型详情（需要 system:category:type:view 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Success\",\r\n    \"data\": {\r\n      \"id\": \"number\",\r\n      \"name\": \"string\",\r\n      \"code\": \"string\",\r\n      \"description\": \"string\",\r\n      \"status\": \"boolean\",\r\n      \"createdAt\": \"string\",\r\n      \"updatedAt\": \"string\",\r\n      \"categories\": [ ... ] // 关联的分类列表\r\n    }\r\n  }\r\n  ```\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Category type not found\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n\r\n## 4. 更新分类类型\r\n\r\n- **接口**：`PUT /api/category-types/:id`\r\n- **描述**：更新指定分类类型（需要 system:category:type:edit 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **请求体**：同创建分类类型\r\n- **响应**：同获取单个分类类型\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Category type not found\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n  或\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Category type code already exists\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n\r\n## 5. 删除分类类型\r\n\r\n- **接口**：`DELETE /api/category-types/:id`\r\n- **描述**：删除指定分类类型（需要 system:category:type:delete 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Category type deleted successfully\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Category type not found\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n  或\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Cannot delete category type with associated categories\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n\r\n# 分类接口文档\r\n\r\n## 1. 创建分类\r\n\r\n- **接口**：`POST /api/categories`\r\n- **描述**：创建新的分类（需要 system:category:add 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **请求体**：\r\n  ```json\r\n  {\r\n    \"name\": \"string\",\r\n    \"code\": \"string\",\r\n    \"typeId\": \"number\",\r\n    \"parentId\": \"number\",\r\n    \"sort\": \"number\",\r\n    \"description\": \"string\"\r\n  }\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Category created successfully\",\r\n    \"data\": {\r\n      \"id\": \"number\",\r\n      \"name\": \"string\",\r\n      \"code\": \"string\",\r\n      \"typeId\": \"number\",\r\n      \"parentId\": \"number\",\r\n      \"sort\": \"number\",\r\n      \"description\": \"string\",\r\n      \"createdAt\": \"string\",\r\n      \"updatedAt\": \"string\",\r\n      \"type\": {\r\n        \"id\": \"number\",\r\n        \"name\": \"string\",\r\n        \"code\": \"string\"\r\n      },\r\n      \"parent\": {\r\n        \"id\": \"number\",\r\n        \"name\": \"string\",\r\n        \"code\": \"string\"\r\n      }\r\n    }\r\n  }\r\n  ```\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Category code already exists\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n  或\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Category type not found\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n  或\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Parent category not found\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n\r\n## 2. 获取分类列表\r\n\r\n- **接口**：`GET /api/categories`\r\n- **描述**：获取所有分类（需指定 typeId 查询参数）（需要 system:category:view 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **查询参数**：\r\n  - `typeId`：分类类型 ID（必填）\r\n- **示例**：\r\n  ```\r\n  GET /api/categories?typeId=1\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Success\",\r\n    \"data\": [\r\n      {\r\n        \"id\": \"number\",\r\n        \"name\": \"string\",\r\n        \"code\": \"string\",\r\n        \"typeId\": \"number\",\r\n        \"parentId\": \"number\",\r\n        \"sort\": \"number\",\r\n        \"description\": \"string\",\r\n        \"type\": {\r\n          \"id\": \"number\",\r\n          \"name\": \"string\",\r\n          \"code\": \"string\"\r\n        },\r\n        \"parent\": {\r\n          \"id\": \"number\",\r\n          \"name\": \"string\",\r\n          \"code\": \"string\"\r\n        }\r\n      }\r\n    ]\r\n  }\r\n  ```\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"TypeId is required\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n\r\n## 3. 获取单个分类\r\n\r\n- **接口**：`GET /api/categories/:id`\r\n- **描述**：获取指定分类详情（需要 system:category:view 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Success\",\r\n    \"data\": {\r\n      \"id\": \"number\",\r\n      \"name\": \"string\",\r\n      \"code\": \"string\",\r\n      \"typeId\": \"number\",\r\n      \"parentId\": \"number\",\r\n      \"sort\": \"number\",\r\n      \"description\": \"string\",\r\n      \"createdAt\": \"string\",\r\n      \"updatedAt\": \"string\",\r\n      \"type\": {\r\n        \"id\": \"number\",\r\n        \"name\": \"string\",\r\n        \"code\": \"string\"\r\n      },\r\n      \"parent\": {\r\n        \"id\": \"number\",\r\n        \"name\": \"string\",\r\n        \"code\": \"string\"\r\n      },\r\n      \"children\": [ ... ] // 子分类\r\n    }\r\n  }\r\n  ```\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Category not found\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n\r\n## 4. 获取分类树\r\n\r\n- **接口**：`GET /api/categories/tree`\r\n- **描述**：获取分类树结构（需指定 typeId 查询参数）（需要 system:category:view 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **查询参数**：\r\n  - `typeId`：分类类型 ID（必填）\r\n- **示例**：\r\n  ```\r\n  GET /api/categories/tree?typeId=1\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Success\",\r\n    \"data\": [\r\n      {\r\n        \"id\": \"number\",\r\n        \"name\": \"string\",\r\n        \"code\": \"string\",\r\n        \"typeId\": \"number\",\r\n        \"parentId\": \"number\",\r\n        \"sort\": \"number\",\r\n        \"description\": \"string\",\r\n        \"children\": [ ... ] // 嵌套的子分类\r\n      }\r\n    ]\r\n  }\r\n  ```\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"TypeId is required\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n\r\n## 5. 更新分类\r\n\r\n- **接口**：`PUT /api/categories/:id`\r\n- **描述**：更新指定分类（需要 system:category:edit 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **请求体**：同创建分类\r\n- **响应**：同获取单个分类\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Category not found\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n  或\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Category code already exists\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n\r\n## 6. 删除分类\r\n\r\n- **接口**：`DELETE /api/categories/:id`\r\n- **描述**：删除指定分类（需要 system:category:delete 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Category deleted successfully\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n- **错误响应**：\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Category not found\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n  或\r\n  ```json\r\n  {\r\n    \"success\": false,\r\n    \"message\": \"Cannot delete category with child categories\",\r\n    \"data\": null\r\n  }\r\n  ```\r\n"
        }
    ]
}