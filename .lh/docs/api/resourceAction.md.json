{
    "sourceFile": "docs/api/resourceAction.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1746070287444,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1746070287444,
            "name": "Commit-0",
            "content": "# 资源操作管理接口文档\r\n\r\n## 概述\r\n\r\n资源操作(ResourceAction)是指针对特定资源的具体操作，如\"新增\"、\"编辑\"、\"删除\"等按钮级操作。\r\n每个资源操作必须关联到一个具体的资源(Resource)，系统会为每个资源操作自动创建对应的权限。\r\n\r\n## 1. 创建资源操作\r\n\r\n- **接口**：`POST /api/resource-actions`\r\n- **描述**：创建新资源操作（需要 system:resource:add 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **请求体**：\r\n  ```json\r\n  {\r\n    \"name\": \"string\",        // 操作名称，如\"新增\"、\"编辑\"、\"删除\"\r\n    \"code\": \"string\",        // 操作代码，如\"add\"、\"edit\"、\"delete\"\r\n    \"description\": \"string\", // 操作描述\r\n    \"icon\": \"string\",        // 图标\r\n    \"sort\": \"number\",        // 排序号\r\n    \"needConfirm\": \"boolean\", // 是否需要确认\r\n    \"confirmMessage\": \"string\", // 确认消息\r\n    \"resourceId\": \"number\"    // 关联的资源ID（必填）\r\n  }\r\n  ```\r\n\r\n- **重要说明**：\r\n  - `resourceId` 是必填字段，指定该操作属于哪个资源\r\n  - 系统会自动为每个资源操作创建一个对应格式的权限记录\r\n\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"data\": {\r\n      \"id\": 1,\r\n      \"name\": \"新增\",\r\n      \"code\": \"system:user:add\",  // 自动组合为 resourceCode:actionCode\r\n      \"description\": \"新增用户\",\r\n      \"icon\": \"plus\",\r\n      \"sort\": 1,\r\n      \"needConfirm\": false,\r\n      \"confirmMessage\": null,\r\n      \"resourceId\": 2,\r\n      \"permission\": {\r\n        \"id\": 10,\r\n        \"name\": \"system:user:add\",\r\n        \"code\": \"system:user:add\",\r\n        \"description\": \"新增用户\"\r\n      }\r\n    }\r\n  }\r\n  ```\r\n\r\n## 2. 获取资源操作列表\r\n\r\n- **接口**：`GET /api/resource-actions`\r\n- **描述**：获取所有资源操作（需要 system:resource:edit 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **查询参数**：\r\n  - `resourceId` (可选): 筛选特定资源的操作\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"data\": [\r\n      {\r\n        \"id\": 1,\r\n        \"name\": \"新增\",\r\n        \"code\": \"system:user:add\",\r\n        \"description\": \"新增用户\",\r\n        \"icon\": \"plus\",\r\n        \"sort\": 1,\r\n        \"needConfirm\": false,\r\n        \"confirmMessage\": null,\r\n        \"resourceId\": 2,\r\n        \"resource\": {\r\n          \"id\": 2,\r\n          \"name\": \"用户管理\",\r\n          \"code\": \"system:user\"\r\n        },\r\n        \"permission\": {\r\n          \"id\": 10,\r\n          \"name\": \"system:user:add\",\r\n          \"code\": \"system:user:add\"\r\n        }\r\n      }\r\n    ]\r\n  }\r\n  ```\r\n\r\n## 3. 获取单个资源操作\r\n\r\n- **接口**：`GET /api/resource-actions/:id`\r\n- **描述**：获取指定资源操作详情（需要 system:resource:edit 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"data\": {\r\n      \"id\": 1,\r\n      \"name\": \"新增\",\r\n      \"code\": \"system:user:add\",\r\n      \"description\": \"新增用户\",\r\n      \"icon\": \"plus\",\r\n      \"sort\": 1,\r\n      \"needConfirm\": false,\r\n      \"confirmMessage\": null,\r\n      \"resourceId\": 2,\r\n      \"resource\": {\r\n        \"id\": 2,\r\n        \"name\": \"用户管理\",\r\n        \"code\": \"system:user\"\r\n      },\r\n      \"permission\": {\r\n        \"id\": 10,\r\n        \"name\": \"system:user:add\",\r\n        \"code\": \"system:user:add\"\r\n      }\r\n    }\r\n  }\r\n  ```\r\n\r\n## 4. 更新资源操作\r\n\r\n- **接口**：`PUT /api/resource-actions/:id`\r\n- **描述**：更新指定资源操作（需要 system:resource:edit 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **请求体**：\r\n  ```json\r\n  {\r\n    \"name\": \"string\",\r\n    \"code\": \"string\",\r\n    \"description\": \"string\",\r\n    \"icon\": \"string\",\r\n    \"sort\": \"number\",\r\n    \"needConfirm\": \"boolean\",\r\n    \"confirmMessage\": \"string\"\r\n  }\r\n  ```\r\n  \r\n- **注意**：更新操作不允许修改 resourceId\r\n\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"data\": {\r\n      \"id\": 1,\r\n      \"name\": \"编辑\",\r\n      \"code\": \"system:user:edit\",\r\n      \"description\": \"编辑用户\",\r\n      \"icon\": \"edit\",\r\n      \"sort\": 2,\r\n      \"needConfirm\": false,\r\n      \"confirmMessage\": null,\r\n      \"resourceId\": 2,\r\n      \"permission\": {\r\n        \"id\": 10,\r\n        \"name\": \"system:user:edit\",\r\n        \"code\": \"system:user:edit\"\r\n      }\r\n    }\r\n  }\r\n  ```\r\n\r\n## 5. 删除资源操作\r\n\r\n- **接口**：`DELETE /api/resource-actions/:id`\r\n- **描述**：删除指定资源操作（需要 system:resource:delete 权限）\r\n- **认证**：需要有效的访问令牌（Bearer Token）\r\n- **请求头**：\r\n  ```\r\n  Authorization: Bearer <accessToken>\r\n  ```\r\n- **响应**：\r\n  ```json\r\n  {\r\n    \"success\": true,\r\n    \"message\": \"Resource action deleted successfully\"\r\n  }\r\n  ```\r\n\r\n- **特别说明**：删除资源操作会同时删除关联的权限"
        }
    ]
}