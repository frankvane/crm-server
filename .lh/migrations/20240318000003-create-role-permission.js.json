{
    "sourceFile": "migrations/20240318000003-create-role-permission.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1746010612308,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1746010629851,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,47 +1,47 @@\n-'use strict';\r\n+\"use strict\";\r\n \r\n module.exports = {\r\n   up: async (queryInterface, Sequelize) => {\r\n-    await queryInterface.createTable('RolePermissions', {\r\n+    await queryInterface.createTable(\"RolePermissions\", {\r\n       roleId: {\r\n         type: Sequelize.INTEGER,\r\n         allowNull: false,\r\n         references: {\r\n-          model: 'Roles',\r\n-          key: 'id'\r\n+          model: \"Roles\",\r\n+          key: \"id\",\r\n         },\r\n-        onUpdate: 'CASCADE',\r\n-        onDelete: 'CASCADE'\r\n+        onUpdate: \"CASCADE\",\r\n+        onDelete: \"CASCADE\",\r\n       },\r\n       permissionId: {\r\n         type: Sequelize.INTEGER,\r\n         allowNull: false,\r\n         references: {\r\n-          model: 'Permissions',\r\n-          key: 'id'\r\n+          model: \"Permissions\",\r\n+          key: \"id\",\r\n         },\r\n-        onUpdate: 'CASCADE',\r\n-        onDelete: 'CASCADE'\r\n+        onUpdate: \"CASCADE\",\r\n+        onDelete: \"CASCADE\",\r\n       },\r\n       createdAt: {\r\n         allowNull: false,\r\n-        type: Sequelize.DATE\r\n+        type: Sequelize.DATE,\r\n       },\r\n       updatedAt: {\r\n         allowNull: false,\r\n-        type: Sequelize.DATE\r\n-      }\r\n+        type: Sequelize.DATE,\r\n+      },\r\n     });\r\n\\ No newline at end of file\n \r\n     // Add a composite primary key\r\n-    await queryInterface.addConstraint('RolePermissions', {\r\n-      fields: ['roleId', 'permissionId'],\r\n-      type: 'primary key',\r\n-      name: 'role_permission_pkey'\r\n+    await queryInterface.addConstraint(\"RolePermissions\", {\r\n+      fields: [\"roleId\", \"permissionId\"],\r\n+      type: \"primary key\",\r\n+      name: \"role_permission_pkey\",\r\n     });\r\n   },\r\n \r\n   down: async (queryInterface, Sequelize) => {\r\n-    await queryInterface.dropTable('RolePermissions');\r\n-  }\r\n-}; \n+    await queryInterface.dropTable(\"RolePermissions\");\r\n+  },\r\n+};\r\n"
                },
                {
                    "date": 1746010676791,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,5 +43,5 @@\n \r\n   down: async (queryInterface, Sequelize) => {\r\n     await queryInterface.dropTable(\"RolePermissions\");\r\n   },\r\n-};\n\\ No newline at end of file\n+};\r\n"
                },
                {
                    "date": 1746017364533,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,32 +1,29 @@\n \"use strict\";\r\n \r\n module.exports = {\r\n   up: async (queryInterface, Sequelize) => {\r\n-    await queryInterface.createTable(\"Permissions\", {\r\n-      id: {\r\n-        allowNull: false,\r\n-        autoIncrement: true,\r\n-        primaryKey: true,\r\n+    await queryInterface.createTable(\"RolePermissions\", {\r\n+      roleId: {\r\n         type: Sequelize.INTEGER,\r\n-      },\r\n-      name: {\r\n-        type: Sequelize.STRING,\r\n         allowNull: false,\r\n-        unique: true,\r\n+        references: {\r\n+          model: \"Roles\",\r\n+          key: \"id\",\r\n+        },\r\n+        onUpdate: \"CASCADE\",\r\n+        onDelete: \"CASCADE\",\r\n       },\r\n-      action: {\r\n-        type: Sequelize.STRING,\r\n+      permissionId: {\r\n+        type: Sequelize.INTEGER,\r\n         allowNull: false,\r\n+        references: {\r\n+          model: \"Permissions\",\r\n+          key: \"id\",\r\n+        },\r\n+        onUpdate: \"CASCADE\",\r\n+        onDelete: \"CASCADE\",\r\n       },\r\n-      resource: {\r\n-        type: Sequelize.STRING,\r\n-        allowNull: false,\r\n-      },\r\n-      description: {\r\n-        type: Sequelize.STRING,\r\n-        allowNull: true,\r\n-      },\r\n       createdAt: {\r\n         allowNull: false,\r\n         type: Sequelize.DATE,\r\n       },\r\n@@ -34,10 +31,17 @@\n         allowNull: false,\r\n         type: Sequelize.DATE,\r\n       },\r\n     });\r\n+\r\n+    // Add a composite primary key\r\n+    await queryInterface.addConstraint(\"RolePermissions\", {\r\n+      fields: [\"roleId\", \"permissionId\"],\r\n+      type: \"primary key\",\r\n+      name: \"role_permission_pkey\",\r\n+    });\r\n   },\r\n \r\n   down: async (queryInterface, Sequelize) => {\r\n-    await queryInterface.dropTable(\"Permissions\");\r\n+    await queryInterface.dropTable(\"RolePermissions\");\r\n   },\r\n };\r\n"
                }
            ],
            "date": 1746010612308,
            "name": "Commit-0",
            "content": "'use strict';\r\n\r\nmodule.exports = {\r\n  up: async (queryInterface, Sequelize) => {\r\n    await queryInterface.createTable('RolePermissions', {\r\n      roleId: {\r\n        type: Sequelize.INTEGER,\r\n        allowNull: false,\r\n        references: {\r\n          model: 'Roles',\r\n          key: 'id'\r\n        },\r\n        onUpdate: 'CASCADE',\r\n        onDelete: 'CASCADE'\r\n      },\r\n      permissionId: {\r\n        type: Sequelize.INTEGER,\r\n        allowNull: false,\r\n        references: {\r\n          model: 'Permissions',\r\n          key: 'id'\r\n        },\r\n        onUpdate: 'CASCADE',\r\n        onDelete: 'CASCADE'\r\n      },\r\n      createdAt: {\r\n        allowNull: false,\r\n        type: Sequelize.DATE\r\n      },\r\n      updatedAt: {\r\n        allowNull: false,\r\n        type: Sequelize.DATE\r\n      }\r\n    });\r\n\r\n    // Add a composite primary key\r\n    await queryInterface.addConstraint('RolePermissions', {\r\n      fields: ['roleId', 'permissionId'],\r\n      type: 'primary key',\r\n      name: 'role_permission_pkey'\r\n    });\r\n  },\r\n\r\n  down: async (queryInterface, Sequelize) => {\r\n    await queryInterface.dropTable('RolePermissions');\r\n  }\r\n}; "
        }
    ]
}